<Window x:Class="LoLModelViewer.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:LoLModelViewer.Views"
        xmlns:models="clr-namespace:LoLModelViewer.Models"
        xmlns:viewmodels="clr-namespace:LoLModelViewer.ViewModels"
        xmlns:converters="clr-namespace:LoLModelViewer.Views.Converters"
        xmlns:controls="clr-namespace:LoLModelViewer.Controls"
        xmlns:materialIcons="clr-namespace:Material.Icons.WPF;assembly=Material.Icons.WPF"
        mc:Ignorable="d"
        Title="LoLModelViewer" Height="768" Width="1024">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition x:Name="ControlPanelColumn" Width="250"/>
            <ColumnDefinition Width="Auto"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <DockPanel x:Name="ControlPanel" Grid.Column="0">
            <Button DockPanel.Dock="Top" Content="Load SKN model" Margin="5" Padding="5" Command="{Binding LoadModelCommand}"/>
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <StackPanel>
                    <Expander Header="Settings" Style="{StaticResource ModernExpanderStyle}" Margin="5">
                        <StackPanel Margin="10">
                            <TextBlock Text="Ambient Brightness"/>
                            <Slider Minimum="0" Maximum="1" Value="{Binding ElementName=CameraView, Path=AmbientBrightness, Mode=TwoWay}" SmallChange="0.05" LargeChange="0.1" />
                            <TextBlock Text="Sun Position X" Margin="0,10,0,0"/>
                            <Slider Minimum="-500" Maximum="500" Value="{Binding ElementName=CameraView, Path=SunX, Mode=TwoWay}" />
                            <TextBlock Text="Sun Position Y"/>
                            <Slider Minimum="0" Maximum="500" Value="{Binding ElementName=CameraView, Path=SunY, Mode=TwoWay}" />
                            <TextBlock Text="Sun Position Z"/>
                            <Slider Minimum="-500" Maximum="500" Value="{Binding ElementName=CameraView, Path=SunZ, Mode=TwoWay}" />
                        </StackPanel>
                    </Expander>

                    <Expander Header="Loaded Models" Style="{StaticResource ModernExpanderStyle}" IsExpanded="True" Margin="5">
                        <ListBox ItemsSource="{Binding SceneModels}" SelectedItem="{Binding SelectedModel}" SelectionMode="Single" Background="Transparent" BorderThickness="0">
                            <ListBox.ItemTemplate>
                                <DataTemplate DataType="{x:Type models:SceneModel}">
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="{Binding Name}" Grid.Column="0" VerticalAlignment="Center"/>
                                        <Button Content="X" Grid.Column="1" Command="{Binding DataContext.RemoveModelCommand, RelativeSource={RelativeSource AncestorType=ListBox}}" CommandParameter="{Binding}" Padding="5,2"/>
                                    </Grid>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Expander>

                    <Expander Header="Model Parts" Style="{StaticResource ModernExpanderStyle}" IsExpanded="True" Margin="5">
                        <ListBox ItemsSource="{Binding ModelParts}" SelectionMode="Single" Background="Transparent" BorderThickness="0">
                            <ListBox.ItemTemplate>
                                <DataTemplate DataType="{x:Type models:ModelPart}">
                                    <StackPanel Orientation="Horizontal">
                                        <CheckBox IsChecked="{Binding IsVisible, Mode=TwoWay}" VerticalAlignment="Center"/>
                                        <TextBlock Text="{Binding Name}" Margin="5,0,0,0" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Expander>

                    <Expander Header="Texturas" Margin="5" IsExpanded="True" Style="{StaticResource ModernExpanderStyle}">
                        <ListBox ItemsSource="{Binding ModelParts}" SelectionMode="Single" Background="Transparent" BorderThickness="0">
                            <ListBox.ItemTemplate>
                                <DataTemplate DataType="{x:Type models:ModelPart}">
                                    <StackPanel Margin="0,2">
                                        <StackPanel Orientation="Horizontal">
                                            <TextBlock Text="{Binding Name}" Margin="5,0,0,0" FontWeight="SemiBold" VerticalAlignment="Center"/>
                                        </StackPanel>
                                        <ComboBox ItemsSource="{Binding AvailableTextureNames}" 
                                                  SelectedItem="{Binding SelectedTextureName, Mode=TwoWay}">
                                            <ComboBox.ItemTemplate>
                                                <DataTemplate>
                                                    <TextBlock Text="{Binding}"/>
                                                </DataTemplate>
                                            </ComboBox.ItemTemplate>
                                        </ComboBox>
                                    </StackPanel>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Expander>
                </StackPanel>
            </ScrollViewer>
        </DockPanel>

        <GridSplitter x:Name="MainGridSplitter" Grid.Column="1" Width="5" HorizontalAlignment="Center" VerticalAlignment="Stretch" Background="LightGray" ShowsPreview="True"/>

        <Button Grid.Column="1" x:Name="TogglePanelButton" Click="TogglePanel_Click" 
                HorizontalAlignment="Center" VerticalAlignment="Center" 
                Width="20" Height="40" Background="Transparent" BorderBrush="Transparent">
            <materialIcons:MaterialIcon x:Name="TogglePanelIcon" Kind="ChevronLeft" />
        </Button>

        <controls:CameraControl x:Name="CameraView" Grid.Column="2" ModelVisuals="{Binding ModelVisuals}" SelectedModel="{Binding SelectedModel}"/>
    </Grid>
</Window>